{"version":3,"sources":["../../core/persistant.ts","../../core/auth.ts","theme.ts","../../core/api-request.ts","components/Header.tsx","utils/is-rtl.ts","components/Item.tsx","components/NewItem.tsx","components/List.tsx","index.tsx","App.tsx","utils/use-book-api.ts","utils/use-promise-handler.tsx"],"names":["key","config","app","value","localStorage","getItem","data","JSON","parse","update","newData","setItem","stringify","persistant","Proxy","get","target","property","receiver","set","deleteProperty","logout","window","location","reload","theme","createMuiTheme","palette","primary","main","secondary","apiRequest","method","path","body","textResult","a","fetch","headers","undefined","response","status","ok","Error","statusText","text","json","Header","book","disabled","onRefresh","useTheme","AppBar","position","Toolbar","IconButton","color","title","onClick","Box","marginLeft","marginRight","Typography","variant","noWrap","name","flexGrow","flexShrink","Button","endIcon","Cached","isRtl","test","Item","item","index","dragging","onCheck","onEdit","onRemove","useState","editMode","setEditMode","editedTitle","setEditedTitle","apply","done","rtl","ClickAwayListener","onClickAway","event","Paper","elevation","padding","display","alignItems","Checkbox","checked","TextField","fullWidth","inputProps","style","fontSize","spacing","height","textAlign","direction","label","placeholder","onChange","onKeyDown","keyCode","Check","Close","align","lineHeight","Edit","NewItem","onAdd","inputRef","useRef","setTitle","add","setTimeout","current","focus","square","backgroundColor","background","default","ArrowDropDown","innerRef","Add","clear","ClearAll","List","onReorder","viewBook","setViewBook","useEffect","result","destination","oldIndex","source","newIndex","itemId","list","id","newList","splice","marginTop","marginBottom","Container","maxWidth","length","paddingTop","paddingBottom","onDragEnd","droppableId","isDropDisabled","provided","snapshot","droppableProps","ref","map","draggableId","String","isDragDisabled","draggableProps","dragHandleProps","isDragging","added","authCodeFromUrl","URLSearchParams","search","authCodeFromLocalStorage","history","replaceState","pathname","href","loginUrl","origin","authenticate","ReactDOM","render","ThemeProvider","CssBaseline","setBook","setStatus","readBook","addTodo","removeTodo","editTodoTitle","editTodoChecked","editTodoPosition","makeRequest","bookTimestamp","editTodo","useBookApi","error","setError","makePromise","makeErrorMessage","success","console","handlePromise","errorSnackbar","Snackbar","open","autoHideDuration","onClose","Alert","severity","usePromiseHandler","timestamp","refresh","append","document","getElementById"],"mappings":"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","file":"static/js/main.6c18680b.chunk.js","sourcesContent":["const key = `app-data/${config.app}`\n\nconst value = localStorage.getItem(key)\nlet data: Persistant = value && JSON.parse(value)\ndata || update({})\n\nfunction update(newData: Persistant): void {\n  localStorage.setItem(key, JSON.stringify(newData))\n  data = newData\n}\n\nconst persistant: Persistant = new Proxy(data, {\n  get(target, property: keyof Persistant, receiver) {\n    return data[property]\n  },\n  set(target, property: keyof Persistant, value, receiver): boolean {\n    update({\n      ...data,\n      [property]: value\n    })\n    return true\n  },\n  deleteProperty(target, property: keyof Persistant): boolean {\n    const { [property]: value, ...newData } = data\n    update(newData)\n    return true\n  }\n}) as any\n\nexport default persistant\n","import persistant from './persistant'\n\n/**\n * Checks authentication status, resolves `auth-code` from URL,\n * returns true iff the app is authenticated and allowed to continue running.\n */\nexport function authenticate(): boolean {\n  const urlParams = new URLSearchParams(window.location.search)\n  const authCodeFromUrl = urlParams.get('auth-code')\n  const authCodeFromLocalStorage = persistant['auth-code']\n\n  if (authCodeFromUrl) {\n    persistant['auth-code'] = authCodeFromUrl\n    window.history.replaceState(null, '', window.location.pathname)\n  } else if (!authCodeFromLocalStorage) {\n    window.location.href = `${config.loginUrl}?app=${config.app}&url=${window.location.origin}${window.location.pathname}`\n    return false\n  }\n  return true\n}\n\n/**\n * Removes authentication and reloads the app,\n * pretty much redirecting it to the login page.\n */\nexport function logout(): void {\n  delete persistant['auth-code']\n  window.location.reload()\n}\n","import { createMuiTheme } from '@material-ui/core'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#A049E7'\n    },\n    secondary: {\n      main: '#E96BED'\n    }\n  }\n})\n\nexport default theme\n","import persistant from './persistant'\nimport { logout } from './auth'\n\nexport async function apiRequest<R = void>(method: 'GET' | 'POST' | 'DELETE' | 'PUT', path: string, body?: any, textResult?: boolean): Promise<R> {\n  const response = await fetch(`/api/${path}`, {\n    method,\n    headers: {\n      'auth-code': persistant['auth-code']!,\n      'Content-Type': 'application/json'\n    },\n    body: body ? JSON.stringify(body) : undefined\n  })\n\n  if (response.status === 401) {\n    logout()\n    return null as any\n  }\n\n  if (!response.ok) throw new Error(`${response.statusText} (${response.status}): ${await response.text()}`)\n\n  return await (textResult ? response.text() : response.json())\n}\n","import React from 'react'\nimport { Theme, AppBar, Toolbar, Typography, Box, IconButton, Button } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Cached as CachedIcon, Close as ExitIcon } from '@material-ui/icons'\n\nimport { logout } from '../../../core/auth'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onRefresh(): void\n}\n\nexport default function Header({ book, disabled, onRefresh }: Props) {\n  const theme = useTheme<Theme>()\n\n  return (\n    <AppBar position=\"absolute\">\n      <Toolbar>\n        <IconButton color=\"inherit\" title=\"Close this list\" disabled={disabled} onClick={() => logout()}>\n          <ExitIcon />\n        </IconButton>\n        <Box marginLeft={1} marginRight={2}>\n          <Typography variant=\"h6\" noWrap>\n            Todo List\n          </Typography>\n        </Box>\n        {book && (\n          <Typography variant=\"subtitle2\" noWrap title=\"Todo list name\">\n            {book.name}\n          </Typography>\n        )}\n        <Box flexGrow={1} />\n        <Box flexGrow={0} flexShrink={0} marginLeft={2}>\n          <Button variant=\"outlined\" color=\"inherit\" endIcon={<CachedIcon />} title=\"Refresh to the latest list\" disabled={disabled} onClick={onRefresh}>\n            Refresh&nbsp;&nbsp;\n          </Button>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","export default function isRtl(text: string): boolean {\n  return /[\\u0590-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]/.test(text)\n}\n","import React, { useState } from 'react'\nimport { Box, Paper, Typography, Checkbox, IconButton, ClickAwayListener, TextField, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Edit as EditIcon, Close as CloseIcon, Check as CheckIcon } from '@material-ui/icons'\n\nimport isRtl from '../utils/is-rtl'\n\ninterface Props {\n  item: Book['list'][number]\n  index: number\n  dragging?: boolean\n  disabled?: boolean\n  onCheck?(checked: boolean): void\n  onEdit?(title: string): Promise<boolean>\n  onRemove?(): void\n}\n\nexport default function Item({ item, index, dragging, disabled, onCheck, onEdit, onRemove }: Props) {\n  const [editMode, setEditMode] = useState(false)\n  const [editedTitle, setEditedTitle] = useState('')\n  const theme = useTheme<Theme>()\n\n  async function apply() {\n    const done = await onEdit?.(editedTitle)\n    setEditMode(!done)\n  }\n\n  const rtl = isRtl(editedTitle)\n\n  if (editMode)\n    return (\n      <ClickAwayListener onClickAway={event => setEditMode(false)}>\n        <Paper elevation={6}>\n          <Box padding={2} display=\"flex\" alignItems=\"center\">\n            <Box marginRight={2}>\n              <Checkbox color=\"secondary\" checked={!!item.checked} disabled={true} />\n            </Box>\n            <TextField\n              fullWidth\n              variant=\"outlined\"\n              inputProps={{\n                style: {\n                  fontSize: theme.spacing(3),\n                  height: theme.spacing(2),\n                  textAlign: rtl ? 'right' : 'left',\n                  direction: rtl ? 'rtl' : 'ltr'\n                }\n              }}\n              disabled={disabled}\n              label=\"Todo Text\"\n              placeholder=\"Write the todo text here...\"\n              value={editedTitle}\n              onChange={({ target: { value } }) => setEditedTitle(value)}\n              onKeyDown={event => event.keyCode === 13 && apply()}\n            />\n            <Box marginRight={1} marginLeft={2}>\n              <IconButton disabled={disabled} title=\"Apply\" onClick={() => apply()}>\n                <CheckIcon />\n              </IconButton>\n            </Box>\n            <IconButton disabled={disabled} title=\"Cancel\" onClick={() => setEditMode(false)}>\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        </Paper>\n      </ClickAwayListener>\n    )\n\n  return (\n    <Paper elevation={2}>\n      <Box padding={2} display=\"flex\" alignItems=\"center\">\n        <Box marginRight={2}>\n          <Checkbox color=\"secondary\" checked={!!item.checked} disabled={disabled} onChange={(event, checked) => onCheck?.(checked)} />\n        </Box>\n        <Typography\n          variant=\"subtitle1\"\n          align=\"center\"\n          style={{\n            flexGrow: 1,\n            fontSize: theme.spacing(3),\n            lineHeight: `calc(${theme.spacing(6)}px + 5px)`\n          }}\n        >\n          {item.title}\n        </Typography>\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton\n            disabled={disabled}\n            title=\"Edit\"\n            onClick={() => {\n              setEditedTitle(item.title)\n              setEditMode(true)\n            }}\n          >\n            <EditIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled} title=\"Remove\" onClick={() => onRemove?.()}>\n          <CloseIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useRef } from 'react'\nimport { Paper, Box, TextField, IconButton, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { ClearAll as ClearAllIcon, Add as AddIcon, ArrowDropDown as ArrowDropDownIcon } from '@material-ui/icons'\n\nimport isRtl from '../utils/is-rtl'\n\ninterface Props {\n  disabled?: boolean\n  onAdd?(title: string): Promise<boolean>\n}\n\nexport default function NewItem({ disabled, onAdd }: Props) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [title, setTitle] = useState('')\n  const theme = useTheme<Theme>()\n\n  async function add() {\n    if (!onAdd) return\n\n    const added = await onAdd(title)\n    if (added) {\n      setTitle('')\n      setTimeout(() => inputRef.current?.focus?.()) //TODO: Not working.\n    }\n  }\n  function clear() {\n    setTitle('')\n    inputRef.current?.focus?.() //TODO: Not working.\n  }\n\n  const rtl = isRtl(title)\n\n  return (\n    <Paper variant=\"outlined\" square>\n      <Box padding={2} display=\"flex\" alignItems=\"center\" style={{ backgroundColor: theme.palette.background.default }}>\n        <Box marginRight={2}>\n          <IconButton\n            disabled={disabled || true}\n            title=\"Select\"\n            onClick={() => {\n              //TODO: Implement suggestions.\n            }}\n          >\n            <ArrowDropDownIcon />\n          </IconButton>\n        </Box>\n        <TextField\n          innerRef={inputRef}\n          fullWidth\n          variant=\"outlined\"\n          inputProps={{\n            style: {\n              fontSize: theme.spacing(3),\n              height: theme.spacing(2),\n              textAlign: rtl ? 'right' : 'left',\n              direction: rtl ? 'rtl' : 'ltr'\n            }\n          }}\n          disabled={disabled}\n          label=\"New Todo\"\n          placeholder=\"Write the todo text here...\"\n          value={title}\n          onChange={({ target: { value } }) => setTitle(value)}\n          onKeyDown={event => event.keyCode === 13 && add()}\n        />\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton disabled={disabled || !title} title=\"Add\" onClick={() => add()}>\n            <AddIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled || !title} title=\"Clear\" onClick={() => clear()}>\n          <ClearAllIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd'\nimport { Container, Typography, Box, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport Item from './Item'\nimport NewItem from './NewItem'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onAdd?(title: string, append: boolean): Promise<boolean>\n  onCheck?(id: number, checked: boolean): void\n  onEdit?(id: number, title: string): Promise<boolean>\n  onRemove?(id: number): void\n  onReorder?(id: number, position: number): Promise<boolean>\n}\n\nexport default function List({ book, disabled, onAdd, onCheck, onEdit, onRemove, onReorder }: Props) {\n  const [viewBook, setViewBook] = useState<typeof book>(book)\n  useEffect(() => {\n    setViewBook(book)\n  }, [book])\n\n  const theme = useTheme<Theme>()\n\n  async function handleDragEnd(result: DropResult): Promise<void> {\n    if (!result.destination || !book || !onReorder || disabled) return\n\n    const oldIndex = result.source.index\n    const newIndex = result.destination.index\n\n    if (oldIndex === newIndex) return\n\n    const itemId = viewBook?.list?.[oldIndex]?.id!\n\n    const newList = [...book.list]\n    const item = newList.splice(oldIndex, 1)[0]\n    newList.splice(newIndex, 0, item)\n    setViewBook({\n      ...book,\n      list: newList\n    })\n\n    const done = await onReorder(itemId, newIndex)\n\n    if (!done) {\n      setViewBook(book)\n    }\n  }\n\n  if (!viewBook) return null\n\n  return (\n    <Box marginTop={10} marginBottom={4}>\n      <Container maxWidth=\"md\">\n        {viewBook.list.length === 0 ? (\n          <Box paddingTop={2} paddingBottom={4}>\n            <Typography variant=\"body1\">There is no items in the list!</Typography>\n            <Typography variant=\"subtitle1\" color=\"secondary\">\n              Start by adding a <strong>new todo</strong>.\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            <Box marginBottom={2}>\n              <NewItem disabled={disabled} onAdd={onAdd && (async title => onAdd(title, false))} />\n            </Box>\n\n            <DragDropContext onDragEnd={handleDragEnd}>\n              <Droppable droppableId=\"list\" isDropDisabled={disabled}>\n                {(provided, snapshot) => (\n                  <div {...provided.droppableProps} ref={provided.innerRef}>\n                    {viewBook.list.map((item, index) => (\n                      <Draggable key={item.id} draggableId={String(item.id)} index={index} isDragDisabled={disabled}>\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            {...provided.dragHandleProps}\n                            style={{\n                              marginBottom: theme.spacing(2),\n                              ...provided.draggableProps.style\n                            }}\n                          >\n                            <Item\n                              item={item}\n                              index={index}\n                              dragging={snapshot.isDragging}\n                              disabled={disabled}\n                              onCheck={onCheck && (checked => onCheck(item.id, checked))}\n                              onEdit={onEdit && (async title => onEdit(item.id, title))}\n                              onRemove={onRemove && (() => onRemove(item.id))}\n                            />\n                          </div>\n                        )}\n                      </Draggable>\n                    ))}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </DragDropContext>\n          </>\n        )}\n        <NewItem\n          disabled={disabled}\n          onAdd={\n            onAdd &&\n            (async title => {\n              const added = await onAdd(title, true)\n              //TODO: Scroll to the end after render completed.\n              return added\n            })\n          }\n        />\n      </Container>\n    </Box>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport { authenticate } from '../../core/auth'\nimport theme from './theme'\nimport App from './App'\n// import * as serviceWorker from './serviceWorker';\n\nauthenticate() &&\n  ReactDOM.render(\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <App />\n    </ThemeProvider>,\n    document.getElementById('root')\n  )\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","import React, { useState, useEffect } from 'react'\n\nimport useBookApi from './utils/use-book-api'\nimport usePromiseHandler from './utils/use-promise-handler'\n\nimport Header from './components/Header'\nimport List from './components/List'\n\nexport default function App() {\n  const [book, setBook] = useState<Book | null>(null)\n  const { status, readBook, addTodo, removeTodo, editTodoTitle, editTodoChecked, editTodoPosition } = useBookApi()\n  const { handlePromise, errorSnackbar } = usePromiseHandler()\n\n  const disabled = !!status\n  const bookTimestamp = book ? book.timestamp : 0\n\n  async function refresh() {\n    const response = await handlePromise(readBook)\n    response.success && setBook(response.result)\n  }\n  async function add(title: string, append: boolean): Promise<boolean> {\n    const position = append ? undefined : 0\n    const response = await handlePromise(() => addTodo(bookTimestamp, title, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function check(id: number, checked: boolean) {\n    const response = await handlePromise(() => editTodoChecked(bookTimestamp, id, checked))\n    response.success && setBook(response.result)\n  }\n  async function edit(id: number, title: string): Promise<boolean> {\n    const response = await handlePromise(() => editTodoTitle(bookTimestamp, id, title))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function remove(id: number) {\n    const response = await handlePromise(() => removeTodo(bookTimestamp, id))\n    response.success && setBook(response.result)\n  }\n  async function reorder(id: number, position: number): Promise<boolean> {\n    const response = await handlePromise(() => editTodoPosition(bookTimestamp, id, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n\n  useEffect(() => {\n    refresh()\n  }, [])\n\n  return (\n    <>\n      <Header book={book} disabled={disabled} onRefresh={refresh} />\n      <List book={book} disabled={disabled} onAdd={add} onCheck={check} onEdit={edit} onRemove={remove} onReorder={reorder} />\n      {errorSnackbar}\n    </>\n  )\n}\n","import { useState } from 'react'\n\nimport { apiRequest } from '../../../core/api-request'\n\ntype Status = 'reading book' | 'adding todo' | 'removing todo' | 'editing todo'\n\nexport default function useBookApi() {\n  const [status, setStatus] = useState<Status | null>(null)\n\n  return {\n    status,\n    readBook,\n    addTodo,\n    removeTodo,\n    editTodoTitle,\n    editTodoChecked,\n    editTodoPosition\n  }\n\n  async function readBook(): Promise<Book> {\n    return await makeRequest('reading book', apiRequest('GET', `todo-list/book`))\n  }\n  async function addTodo(bookTimestamp: number, title: string, position?: number): Promise<Book> {\n    return await makeRequest('adding todo', apiRequest('POST', `todo-list/book/todo`, { bookTimestamp, title, position }))\n  }\n  async function removeTodo(bookTimestamp: number, id: number): Promise<Book> {\n    return await makeRequest('removing todo', apiRequest('DELETE', `todo-list/book/todo`, { bookTimestamp, id }))\n  }\n  async function editTodo(\n    bookTimestamp: number,\n    id: number,\n    title: string | undefined,\n    checked: boolean | undefined,\n    position: number | undefined\n  ): Promise<Book> {\n    return await makeRequest('editing todo', apiRequest('PUT', `todo-list/book/todo`, { bookTimestamp, id, title, checked, position }))\n  }\n\n  async function editTodoTitle(bookTimestamp: number, id: number, title: string) {\n    return await editTodo(bookTimestamp, id, title, undefined, undefined)\n  }\n  async function editTodoChecked(bookTimestamp: number, id: number, checked: boolean) {\n    return await editTodo(bookTimestamp, id, undefined, checked, undefined)\n  }\n  async function editTodoPosition(bookTimestamp: number, id: number, position: number) {\n    return await editTodo(bookTimestamp, id, undefined, undefined, position)\n  }\n\n  async function makeRequest(status: Status, response: Promise<Book>): Promise<Book> {\n    if (!status) throw new Error(`Not possible while ${status}.`)\n\n    setStatus(status)\n    try {\n      const book: Book = await response\n      setStatus(null)\n      return book\n    } catch (reason) {\n      setStatus(null)\n      throw reason\n    }\n  }\n}\n","import React, { useState } from 'react'\nimport { Snackbar } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nexport default function usePromiseHandler() {\n  const [error, setError] = useState<string | null>(null)\n\n  async function handlePromise<T>(\n    makePromise: () => Promise<T>,\n    makeErrorMessage?: (reason: any) => string\n  ): Promise<{ success: true; result: T } | { success: false }> {\n    try {\n      const result = await makePromise()\n      setError(null)\n      return { success: true, result }\n    } catch (reason) {\n      console.error(reason)\n      setError(makeErrorMessage ? makeErrorMessage(reason) : String(reason))\n      return { success: false }\n    }\n  }\n\n  const errorSnackbar = (\n    <Snackbar open={!!error} autoHideDuration={5000} onClose={() => setError(null)}>\n      <Alert severity=\"error\" onClose={() => setError(null)}>\n        {error}\n      </Alert>\n    </Snackbar>\n  )\n\n  return {\n    handlePromise,\n    errorSnackbar\n  }\n}\n"],"sourceRoot":""}