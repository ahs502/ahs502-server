(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{72:function(e,t,n){e.exports=n(83)},83:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),i=n(128),u=n(129),s=n(61),l=n(60),d=n(39),p=n(37),f="app-data/".concat(config.app),m=localStorage.getItem(f),b=m&&JSON.parse(m);function h(e){localStorage.setItem(f,JSON.stringify(e)),b=e}b||h({});var v=new Proxy(b,{get:function(e,t,n){return b[t]},set:function(e,t,n,r){return h(Object(p.a)({},b,Object(d.a)({},t,n))),!0},deleteProperty:function(e,t){var n=b;n[t];return h(Object(s.a)(n,[t].map(l.a))),!0}});function E(){delete v["auth-code"],window.location.reload()}var g=n(58),w=Object(g.a)({palette:{primary:{main:"#A049E7"},secondary:{main:"#E96BED"}}}),k=n(6),x=n.n(k),y=n(8),O=n(18),j=n(131);function T(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=Object(y.a)(x.a.mark((function e(t,n,r,a){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/".concat(n),{method:t,headers:{"auth-code":v["auth-code"],"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});case 2:if(401!==(c=e.sent).status){e.next=6;break}return E(),e.abrupt("return",null);case 6:if(c.ok){e.next=14;break}return e.t0=Error,e.t1="".concat(c.statusText," (").concat(c.status,"): "),e.next=11,c.text();case 11:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 14:return e.next=16,a?c.text():c.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(111),R=n(114),P=n(115),D=n(132),A=n(117),I=n(118),B=n(62),L=n(116),W=n(119);function G(e){var t=e.book,n=e.disabled,r=e.onRefresh;Object(B.a)();return a.a.createElement(S.a,{position:"absolute"},a.a.createElement(R.a,null,a.a.createElement(P.a,{color:"inherit",disabled:n,onClick:function(){return E()}},a.a.createElement(L.a,null)),a.a.createElement(D.a,{marginX:2},a.a.createElement(A.a,{variant:"h6",noWrap:!0},"Todo List")),t&&a.a.createElement(A.a,{variant:"subtitle2",noWrap:!0},t.name),a.a.createElement(D.a,{flexGrow:1}),a.a.createElement(D.a,{flexGrow:0,flexShrink:0,marginLeft:2},a.a.createElement(I.a,{variant:"outlined",color:"inherit",endIcon:a.a.createElement(W.a,null),disabled:n,onClick:r},"Refresh\xa0\xa0"))))}var J=n(136),N=n(133);var U=n(59),F=n(44),H=n(127),K=n(120),q=n(84),X=n(134),z=n(130),M=n(121),Q=n(122),V=n(123);function Y(e){var t=e.item,n=(e.index,e.dragging,e.disabled),c=e.onCheck,o=e.onEdit,i=e.onRemove,u=Object(r.useState)(!1),s=Object(O.a)(u,2),l=s[0],d=s[1],p=Object(r.useState)(""),f=Object(O.a)(p,2),m=f[0],b=f[1];function h(){return v.apply(this,arguments)}function v(){return(v=Object(y.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===o||void 0===o?void 0:o(m);case 2:t=e.sent,d(!t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l?a.a.createElement(K.a,{onClickAway:function(e){return d(!1)}},a.a.createElement(q.a,{elevation:6},a.a.createElement(D.a,{padding:2,display:"flex",alignItems:"center"},a.a.createElement(D.a,{marginRight:2},a.a.createElement(X.a,{color:"secondary",checked:!!t.checked,disabled:!0})),a.a.createElement(z.a,{fullWidth:!0,disabled:n,label:"Todo Text",placeholder:"Write the todo text here...",value:m,onChange:function(e){var t=e.target.value;return b(t)},onKeyDown:function(e){return 13===e.keyCode&&h()}}),a.a.createElement(D.a,{flexGrow:1}),a.a.createElement(D.a,{marginRight:1,marginLeft:2},a.a.createElement(P.a,{disabled:n,title:"Apply",onClick:function(){return h()}},a.a.createElement(M.a,null))),a.a.createElement(P.a,{disabled:n,title:"Cancel",onClick:function(){return d(!1)}},a.a.createElement(Q.a,null))))):a.a.createElement(q.a,{elevation:2},a.a.createElement(D.a,{padding:2,display:"flex",alignItems:"center"},a.a.createElement(D.a,{marginRight:2},a.a.createElement(X.a,{color:"secondary",checked:!!t.checked,disabled:n,onChange:function(e,t){return null===c||void 0===c?void 0:c(t)}})),a.a.createElement(A.a,{variant:"subtitle1"},t.title),a.a.createElement(D.a,{flexGrow:1}),a.a.createElement(D.a,{marginRight:1,marginLeft:2},a.a.createElement(P.a,{disabled:n,title:"Edit",onClick:function(){b(t.title),d(!0)}},a.a.createElement(V.a,null))),a.a.createElement(P.a,{disabled:n,title:"Remove",onClick:function(){return null===i||void 0===i?void 0:i()}},a.a.createElement(Q.a,null))))}var Z=n(124),$=n(125),_=n(126);function ee(e){var t=e.disabled,n=e.onAdd,c=Object(r.useRef)(null),o=Object(r.useState)(""),i=Object(O.a)(o,2),u=i[0],s=i[1],l=Object(B.a)();function d(){return p.apply(this,arguments)}function p(){return(p=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n(u);case 4:e.sent&&(s(""),setTimeout((function(){var e,t;return null===(e=c.current)||void 0===e||null===(t=e.focus)||void 0===t?void 0:t.call(e)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(q.a,{variant:"outlined",square:!0},a.a.createElement(D.a,{padding:2,display:"flex",alignItems:"center",style:{backgroundColor:l.palette.background.default}},a.a.createElement(D.a,{marginRight:2},a.a.createElement(P.a,{disabled:t||!0,title:"Select",onClick:function(){}},a.a.createElement(Z.a,null))),a.a.createElement(z.a,{innerRef:c,fullWidth:!0,disabled:t,label:"New Todo",placeholder:"Write the todo text here...",value:u,onChange:function(e){var t=e.target.value;return s(t)},onKeyDown:function(e){return 13===e.keyCode&&d()}}),a.a.createElement(D.a,{flexGrow:1}),a.a.createElement(D.a,{marginRight:1,marginLeft:2},a.a.createElement(P.a,{disabled:t||!u,title:"Add",onClick:function(){return d()}},a.a.createElement($.a,null))),a.a.createElement(P.a,{disabled:t||!u,title:"Clear",onClick:function(){return function(){var e,t;s(""),null===(e=c.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}()}},a.a.createElement(_.a,null))))}function te(e){var t=e.book,n=e.disabled,c=e.onAdd,o=e.onCheck,i=e.onEdit,u=e.onRemove,s=e.onReorder,l=Object(r.useState)(t),d=Object(O.a)(l,2),f=d[0],m=d[1];Object(r.useEffect)((function(){m(t)}),[t]);var b=Object(B.a)();function h(){return(h=Object(y.a)(x.a.mark((function e(r){var a,c,o,i,u,l,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.destination&&t&&s&&!n){e.next=2;break}return e.abrupt("return");case 2:return o=r.source.index,i=null===f||void 0===f||null===(a=f.list)||void 0===a||null===(c=a[o])||void 0===c?void 0:c.id,u=r.destination.index,l=Object(U.a)(t.list),d=l.splice(o,1)[0],l.splice(u,0,d),m(Object(p.a)({},t,{list:l})),e.next=11,s(i,u);case 11:e.sent||m(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f?a.a.createElement(D.a,{marginTop:10},a.a.createElement(H.a,{maxWidth:"md"},0===f.list.length?a.a.createElement(D.a,{paddingTop:2,paddingBottom:4},a.a.createElement(A.a,{variant:"body1"},"There is no items in the list!"),a.a.createElement(A.a,{variant:"subtitle1",color:"secondary"},"Start by adding a ",a.a.createElement("strong",null,"new")," todo.")):a.a.createElement(a.a.Fragment,null,a.a.createElement(D.a,{marginBottom:2},a.a.createElement(ee,{disabled:n,onAdd:c&&function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(t,!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),a.a.createElement(F.a,{onDragEnd:function(e){return h.apply(this,arguments)}},a.a.createElement(F.c,{droppableId:"list",isDropDisabled:n},(function(e,t){return a.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),f.list.map((function(e,t){return a.a.createElement(F.b,{key:e.id,draggableId:String(e.id),index:t,isDragDisabled:n},(function(r,c){return a.a.createElement("div",Object.assign({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:Object(p.a)({marginBottom:b.spacing(2)},r.draggableProps.style)}),a.a.createElement(Y,{item:e,index:t,dragging:c.isDragging,disabled:n,onCheck:o&&function(t){return o(e.id,t)},onEdit:i&&function(){var t=Object(y.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i(e.id,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:u&&function(){return u(e.id)}}))}))})),e.placeholder)})))),a.a.createElement(ee,{disabled:n,onAdd:c&&function(){var e=Object(y.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,!0);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))):null}var ne=Object(j.a)((function(e){return{}}));var re=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],o=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],a=t[1];return{status:n,readBook:function(){return c.apply(this,arguments)},addTodo:function(e,t,n){return o.apply(this,arguments)},removeTodo:function(e,t){return i.apply(this,arguments)},editTodoTitle:function(e,t,n){return l.apply(this,arguments)},editTodoChecked:function(e,t,n){return d.apply(this,arguments)},editTodoPosition:function(e,t,n){return p.apply(this,arguments)}};function c(){return(c=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("reading book",T("GET","todo-list/book"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(y.a)(x.a.mark((function e(t,n,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("adding todo",T("POST","todo-list/book/todo",{bookTimestamp:t,title:n,position:r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(y.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("removing todo",T("DELETE","todo-list/book/todo",{bookTimestamp:t,id:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,n,r,a){return s.apply(this,arguments)}function s(){return(s=Object(y.a)(x.a.mark((function e(t,n,r,a,c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("editing todo",T("PUT","todo-list/book/todo",{bookTimestamp:t,id:n,title:r,checked:a,position:c}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(y.a)(x.a.mark((function e(t,n,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n,r,void 0,void 0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(y.a)(x.a.mark((function e(t,n,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n,void 0,r,void 0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(y.a)(x.a.mark((function e(t,n,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n,void 0,void 0,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=Object(y.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Not possible while ".concat(t,"."));case 2:return a(t),e.prev=3,e.next=6,n;case 6:return r=e.sent,a(null),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(3),a(null),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}}(),i=o.status,u=o.readBook,s=o.addTodo,l=o.removeTodo,d=o.editTodoTitle,p=o.editTodoChecked,f=o.editTodoPosition,m=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1];function o(){return(o=Object(y.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return r=e.sent,c(null),e.abrupt("return",{success:!0,result:r});case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),c(n?n(e.t0):String(e.t0)),e.abrupt("return",{success:!1});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return{handlePromise:function(e,t){return o.apply(this,arguments)},errorSnackbar:a.a.createElement(J.a,{open:!!n,autoHideDuration:5e3,onClose:function(){return c(null)}},a.a.createElement(N.a,{severity:"error",onClose:function(){return c(null)}},n))}}(),b=m.handlePromise,h=m.errorSnackbar,v=!!i,E=n?n.timestamp:0;function g(){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(u);case 2:(t=e.sent).success&&c(t.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(y.a)(x.a.mark((function e(t,n){var r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?void 0:0,e.next=3,b((function(){return s(E,t,r)}));case 3:return(a=e.sent).success&&c(a.result),e.abrupt("return",a.success);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(y.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b((function(){return p(E,t,n)}));case 2:(r=e.sent).success&&c(r.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(y.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b((function(){return d(E,t,n)}));case 2:return(r=e.sent).success&&c(r.result),e.abrupt("return",r.success);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(y.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b((function(){return l(E,t)}));case 2:(n=e.sent).success&&c(n.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(y.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b((function(){return f(E,t,n)}));case 2:return(r=e.sent).success&&c(r.result),e.abrupt("return",r.success);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){g()}),[]),ne(),a.a.createElement(a.a.Fragment,null,a.a.createElement(G,{book:n,disabled:v,onRefresh:g}),a.a.createElement(te,{book:n,disabled:v,onAdd:function(e,t){return k.apply(this,arguments)},onCheck:function(e,t){return j.apply(this,arguments)},onEdit:function(e,t){return C.apply(this,arguments)},onRemove:function(e){return S.apply(this,arguments)},onReorder:function(e,t){return R.apply(this,arguments)}}),h)};(function(){var e=new URLSearchParams(window.location.search).get("auth-code"),t=v["auth-code"];if(e)v["auth-code"]=e,window.history.replaceState(null,"",window.location.pathname);else if(!t)return window.location.href="".concat(config.loginUrl,"?app=").concat(config.app,"&url=").concat(window.location.origin).concat(window.location.pathname),!1;return!0})()&&o.a.render(a.a.createElement(i.a,{theme:w},a.a.createElement(u.a,null),a.a.createElement(re,null)),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.374e07d9.chunk.js.map