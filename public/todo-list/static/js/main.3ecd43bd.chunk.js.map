{"version":3,"sources":["../../core/persistant.ts","../../core/auth.ts","theme.ts","../../core/api-request.ts","components/Header.tsx","utils/is-rtl.ts","components/Item.tsx","components/NewItem.tsx","components/List.tsx","App.tsx","utils/use-book-api.ts","utils/use-promise-handler.tsx","index.tsx"],"names":["key","config","app","value","localStorage","getItem","data","JSON","parse","update","newData","setItem","stringify","persistant","Proxy","get","target","property","receiver","set","deleteProperty","logout","window","location","reload","theme","createMuiTheme","palette","primary","main","secondary","apiRequest","method","path","body","textResult","a","fetch","headers","undefined","response","status","ok","Error","statusText","text","json","Header","book","disabled","onRefresh","useTheme","AppBar","position","Toolbar","IconButton","color","onClick","Box","marginLeft","marginRight","Typography","variant","noWrap","name","flexGrow","flexShrink","Button","endIcon","Cached","isRtl","test","Item","item","index","dragging","onCheck","onEdit","onRemove","useState","editMode","setEditMode","editedTitle","setEditedTitle","apply","done","rtl","ClickAwayListener","onClickAway","event","Paper","elevation","padding","display","alignItems","Checkbox","checked","TextField","fullWidth","inputProps","style","fontSize","spacing","height","textAlign","direction","label","placeholder","onChange","onKeyDown","keyCode","title","Check","Close","align","lineHeight","Edit","NewItem","onAdd","inputRef","useRef","setTitle","add","setTimeout","current","focus","square","backgroundColor","background","default","ArrowDropDown","innerRef","Add","clear","ClearAll","List","onReorder","viewBook","setViewBook","useEffect","result","destination","oldIndex","source","newIndex","itemId","list","id","newList","splice","marginTop","marginBottom","Container","maxWidth","length","paddingTop","paddingBottom","onDragEnd","droppableId","isDropDisabled","provided","snapshot","droppableProps","ref","map","draggableId","String","isDragDisabled","draggableProps","dragHandleProps","isDragging","added","App","setBook","setStatus","readBook","addTodo","removeTodo","editTodoTitle","editTodoChecked","editTodoPosition","makeRequest","bookTimestamp","editTodo","useBookApi","error","setError","makePromise","makeErrorMessage","success","console","handlePromise","errorSnackbar","Snackbar","open","autoHideDuration","onClose","Alert","severity","usePromiseHandler","timestamp","refresh","append","authCodeFromUrl","URLSearchParams","search","authCodeFromLocalStorage","history","replaceState","pathname","href","loginUrl","origin","authenticate","ReactDOM","render","ThemeProvider","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.3ecd43bd.chunk.js","sourcesContent":["const key = `app-data/${config.app}`\n\nconst value = localStorage.getItem(key)\nlet data: Persistant = value && JSON.parse(value)\ndata || update({})\n\nfunction update(newData: Persistant): void {\n  localStorage.setItem(key, JSON.stringify(newData))\n  data = newData\n}\n\nconst persistant: Persistant = new Proxy(data, {\n  get(target, property: keyof Persistant, receiver) {\n    return data[property]\n  },\n  set(target, property: keyof Persistant, value, receiver): boolean {\n    update({\n      ...data,\n      [property]: value\n    })\n    return true\n  },\n  deleteProperty(target, property: keyof Persistant): boolean {\n    const { [property]: value, ...newData } = data\n    update(newData)\n    return true\n  }\n}) as any\n\nexport default persistant\n","import persistant from './persistant'\n\n/**\n * Checks authentication status, resolves `auth-code` from URL,\n * returns true iff the app is authenticated and allowed to continue running.\n */\nexport function authenticate(): boolean {\n  const urlParams = new URLSearchParams(window.location.search)\n  const authCodeFromUrl = urlParams.get('auth-code')\n  const authCodeFromLocalStorage = persistant['auth-code']\n\n  if (authCodeFromUrl) {\n    persistant['auth-code'] = authCodeFromUrl\n    window.history.replaceState(null, '', window.location.pathname)\n  } else if (!authCodeFromLocalStorage) {\n    window.location.href = `${config.loginUrl}?app=${config.app}&url=${window.location.origin}${window.location.pathname}`\n    return false\n  }\n  return true\n}\n\n/**\n * Removes authentication and reloads the app,\n * pretty much redirecting it to the login page.\n */\nexport function logout(): void {\n  delete persistant['auth-code']\n  window.location.reload()\n}\n","import { createMuiTheme } from '@material-ui/core'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#A049E7'\n    },\n    secondary: {\n      main: '#E96BED'\n    }\n  }\n})\n\nexport default theme\n","import persistant from './persistant'\nimport { logout } from './auth'\n\nexport async function apiRequest<R = void>(method: 'GET' | 'POST' | 'DELETE' | 'PUT', path: string, body?: any, textResult?: boolean): Promise<R> {\n  const response = await fetch(`/api/${path}`, {\n    method,\n    headers: {\n      'auth-code': persistant['auth-code']!,\n      'Content-Type': 'application/json'\n    },\n    body: body ? JSON.stringify(body) : undefined\n  })\n\n  if (response.status === 401) {\n    logout()\n    return null as any\n  }\n\n  if (!response.ok) throw new Error(`${response.statusText} (${response.status}): ${await response.text()}`)\n\n  return await (textResult ? response.text() : response.json())\n}\n","import React from 'react'\nimport { Theme, AppBar, Toolbar, Typography, Box, IconButton, Button } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Cached as CachedIcon, Close as ExitIcon } from '@material-ui/icons'\n\nimport { logout } from '../../../core/auth'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onRefresh(): void\n}\n\nexport default function Header({ book, disabled, onRefresh }: Props) {\n  const theme = useTheme<Theme>()\n\n  return (\n    <AppBar position=\"absolute\">\n      <Toolbar>\n        <IconButton color=\"inherit\" disabled={disabled} onClick={() => logout()}>\n          <ExitIcon />\n        </IconButton>\n        <Box marginLeft={1} marginRight={2}>\n          <Typography variant=\"h6\" noWrap>\n            Todo List\n          </Typography>\n        </Box>\n        {book && (\n          <Typography variant=\"subtitle2\" noWrap>\n            {book.name}\n          </Typography>\n        )}\n        <Box flexGrow={1} />\n        <Box flexGrow={0} flexShrink={0} marginLeft={2}>\n          <Button variant=\"outlined\" color=\"inherit\" endIcon={<CachedIcon />} disabled={disabled} onClick={onRefresh}>\n            Refresh&nbsp;&nbsp;\n          </Button>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","export default function isRtl(text: string): boolean {\n  return /[\\u0590-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]/.test(text)\n}\n","import React, { useState } from 'react'\nimport { Box, Paper, Typography, Checkbox, IconButton, ClickAwayListener, TextField, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Edit as EditIcon, Close as CloseIcon, Check as CheckIcon } from '@material-ui/icons'\n\nimport isRtl from '../utils/is-rtl'\n\ninterface Props {\n  item: Book['list'][number]\n  index: number\n  dragging?: boolean\n  disabled?: boolean\n  onCheck?(checked: boolean): void\n  onEdit?(title: string): Promise<boolean>\n  onRemove?(): void\n}\n\nexport default function Item({ item, index, dragging, disabled, onCheck, onEdit, onRemove }: Props) {\n  const [editMode, setEditMode] = useState(false)\n  const [editedTitle, setEditedTitle] = useState('')\n  const theme = useTheme<Theme>()\n\n  async function apply() {\n    const done = await onEdit?.(editedTitle)\n    setEditMode(!done)\n  }\n\n  const rtl = isRtl(editedTitle)\n\n  if (editMode)\n    return (\n      <ClickAwayListener onClickAway={event => setEditMode(false)}>\n        <Paper elevation={6}>\n          <Box padding={2} display=\"flex\" alignItems=\"center\">\n            <Box marginRight={2}>\n              <Checkbox color=\"secondary\" checked={!!item.checked} disabled={true} />\n            </Box>\n            <TextField\n              fullWidth\n              variant=\"outlined\"\n              inputProps={{\n                style: {\n                  fontSize: theme.spacing(3),\n                  height: theme.spacing(2),\n                  textAlign: rtl ? 'right' : 'left',\n                  direction: rtl ? 'rtl' : 'ltr'\n                }\n              }}\n              disabled={disabled}\n              label=\"Todo Text\"\n              placeholder=\"Write the todo text here...\"\n              value={editedTitle}\n              onChange={({ target: { value } }) => setEditedTitle(value)}\n              onKeyDown={event => event.keyCode === 13 && apply()}\n            />\n            <Box marginRight={1} marginLeft={2}>\n              <IconButton disabled={disabled} title=\"Apply\" onClick={() => apply()}>\n                <CheckIcon />\n              </IconButton>\n            </Box>\n            <IconButton disabled={disabled} title=\"Cancel\" onClick={() => setEditMode(false)}>\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        </Paper>\n      </ClickAwayListener>\n    )\n\n  return (\n    <Paper elevation={2}>\n      <Box padding={2} display=\"flex\" alignItems=\"center\">\n        <Box marginRight={2}>\n          <Checkbox color=\"secondary\" checked={!!item.checked} disabled={disabled} onChange={(event, checked) => onCheck?.(checked)} />\n        </Box>\n        <Typography\n          variant=\"subtitle1\"\n          align=\"center\"\n          style={{\n            flexGrow: 1,\n            fontSize: theme.spacing(3),\n            lineHeight: `calc(${theme.spacing(6)}px + 5px)`\n          }}\n        >\n          {item.title}\n        </Typography>\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton\n            disabled={disabled}\n            title=\"Edit\"\n            onClick={() => {\n              setEditedTitle(item.title)\n              setEditMode(true)\n            }}\n          >\n            <EditIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled} title=\"Remove\" onClick={() => onRemove?.()}>\n          <CloseIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useRef } from 'react'\nimport { Paper, Box, TextField, IconButton, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { ClearAll as ClearAllIcon, Add as AddIcon, ArrowDropDown as ArrowDropDownIcon } from '@material-ui/icons'\n\nimport isRtl from '../utils/is-rtl'\n\ninterface Props {\n  disabled?: boolean\n  onAdd?(title: string): Promise<boolean>\n}\n\nexport default function NewItem({ disabled, onAdd }: Props) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [title, setTitle] = useState('')\n  const theme = useTheme<Theme>()\n\n  async function add() {\n    if (!onAdd) return\n\n    const added = await onAdd(title)\n    if (added) {\n      setTitle('')\n      setTimeout(() => inputRef.current?.focus?.()) //TODO: Not working.\n    }\n  }\n  function clear() {\n    setTitle('')\n    inputRef.current?.focus?.() //TODO: Not working.\n  }\n\n  const rtl = isRtl(title)\n\n  return (\n    <Paper variant=\"outlined\" square>\n      <Box padding={2} display=\"flex\" alignItems=\"center\" style={{ backgroundColor: theme.palette.background.default }}>\n        <Box marginRight={2}>\n          <IconButton\n            disabled={disabled || true}\n            title=\"Select\"\n            onClick={() => {\n              //TODO: Implement suggestions.\n            }}\n          >\n            <ArrowDropDownIcon />\n          </IconButton>\n        </Box>\n        <TextField\n          innerRef={inputRef}\n          fullWidth\n          variant=\"outlined\"\n          inputProps={{\n            style: {\n              fontSize: theme.spacing(3),\n              height: theme.spacing(2),\n              textAlign: rtl ? 'right' : 'left',\n              direction: rtl ? 'rtl' : 'ltr'\n            }\n          }}\n          disabled={disabled}\n          label=\"New Todo\"\n          placeholder=\"Write the todo text here...\"\n          value={title}\n          onChange={({ target: { value } }) => setTitle(value)}\n          onKeyDown={event => event.keyCode === 13 && add()}\n        />\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton disabled={disabled || !title} title=\"Add\" onClick={() => add()}>\n            <AddIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled || !title} title=\"Clear\" onClick={() => clear()}>\n          <ClearAllIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd'\nimport { Container, Typography, Box, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport Item from './Item'\nimport NewItem from './NewItem'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onAdd?(title: string, append: boolean): Promise<boolean>\n  onCheck?(id: number, checked: boolean): void\n  onEdit?(id: number, title: string): Promise<boolean>\n  onRemove?(id: number): void\n  onReorder?(id: number, position: number): Promise<boolean>\n}\n\nexport default function List({ book, disabled, onAdd, onCheck, onEdit, onRemove, onReorder }: Props) {\n  const [viewBook, setViewBook] = useState<typeof book>(book)\n  useEffect(() => {\n    setViewBook(book)\n  }, [book])\n\n  const theme = useTheme<Theme>()\n\n  async function handleDragEnd(result: DropResult): Promise<void> {\n    if (!result.destination || !book || !onReorder || disabled) return\n\n    const oldIndex = result.source.index\n    const newIndex = result.destination.index\n\n    if (oldIndex === newIndex) return\n\n    const itemId = viewBook?.list?.[oldIndex]?.id!\n\n    const newList = [...book.list]\n    const item = newList.splice(oldIndex, 1)[0]\n    newList.splice(newIndex, 0, item)\n    setViewBook({\n      ...book,\n      list: newList\n    })\n\n    const done = await onReorder(itemId, newIndex)\n\n    if (!done) {\n      setViewBook(book)\n    }\n  }\n\n  if (!viewBook) return null\n\n  return (\n    <Box marginTop={10} marginBottom={4}>\n      <Container maxWidth=\"md\">\n        {viewBook.list.length === 0 ? (\n          <Box paddingTop={2} paddingBottom={4}>\n            <Typography variant=\"body1\">There is no items in the list!</Typography>\n            <Typography variant=\"subtitle1\" color=\"secondary\">\n              Start by adding a <strong>new todo</strong>.\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            <Box marginBottom={2}>\n              <NewItem disabled={disabled} onAdd={onAdd && (async title => onAdd(title, false))} />\n            </Box>\n\n            <DragDropContext onDragEnd={handleDragEnd}>\n              <Droppable droppableId=\"list\" isDropDisabled={disabled}>\n                {(provided, snapshot) => (\n                  <div {...provided.droppableProps} ref={provided.innerRef}>\n                    {viewBook.list.map((item, index) => (\n                      <Draggable key={item.id} draggableId={String(item.id)} index={index} isDragDisabled={disabled}>\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            {...provided.dragHandleProps}\n                            style={{\n                              marginBottom: theme.spacing(2),\n                              ...provided.draggableProps.style\n                            }}\n                          >\n                            <Item\n                              item={item}\n                              index={index}\n                              dragging={snapshot.isDragging}\n                              disabled={disabled}\n                              onCheck={onCheck && (checked => onCheck(item.id, checked))}\n                              onEdit={onEdit && (async title => onEdit(item.id, title))}\n                              onRemove={onRemove && (() => onRemove(item.id))}\n                            />\n                          </div>\n                        )}\n                      </Draggable>\n                    ))}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </DragDropContext>\n          </>\n        )}\n        <NewItem\n          disabled={disabled}\n          onAdd={\n            onAdd &&\n            (async title => {\n              const added = await onAdd(title, true)\n              //TODO: Scroll to the end after render completed.\n              return added\n            })\n          }\n        />\n      </Container>\n    </Box>\n  )\n}\n","import React, { useState, useEffect } from 'react'\n\nimport useBookApi from './utils/use-book-api'\nimport usePromiseHandler from './utils/use-promise-handler'\n\nimport Header from './components/Header'\nimport List from './components/List'\n\nfunction App() {\n  const [book, setBook] = useState<Book | null>(null)\n  const { status, readBook, addTodo, removeTodo, editTodoTitle, editTodoChecked, editTodoPosition } = useBookApi()\n  const { handlePromise, errorSnackbar } = usePromiseHandler()\n\n  const disabled = !!status\n  const bookTimestamp = book ? book.timestamp : 0\n\n  async function refresh() {\n    const response = await handlePromise(readBook)\n    response.success && setBook(response.result)\n  }\n  async function add(title: string, append: boolean): Promise<boolean> {\n    const position = append ? undefined : 0\n    const response = await handlePromise(() => addTodo(bookTimestamp, title, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function check(id: number, checked: boolean) {\n    const response = await handlePromise(() => editTodoChecked(bookTimestamp, id, checked))\n    response.success && setBook(response.result)\n  }\n  async function edit(id: number, title: string): Promise<boolean> {\n    const response = await handlePromise(() => editTodoTitle(bookTimestamp, id, title))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function remove(id: number) {\n    const response = await handlePromise(() => removeTodo(bookTimestamp, id))\n    response.success && setBook(response.result)\n  }\n  async function reorder(id: number, position: number): Promise<boolean> {\n    const response = await handlePromise(() => editTodoPosition(bookTimestamp, id, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n\n  useEffect(() => {\n    refresh()\n  }, [])\n\n  return (\n    <>\n      <Header book={book} disabled={disabled} onRefresh={refresh} />\n      <List book={book} disabled={disabled} onAdd={add} onCheck={check} onEdit={edit} onRemove={remove} onReorder={reorder} />\n      {errorSnackbar}\n    </>\n  )\n}\n\nexport default App\n","import { useState } from 'react'\n\nimport { apiRequest } from '../../../core/api-request'\n\ntype Status = 'reading book' | 'adding todo' | 'removing todo' | 'editing todo'\n\nexport default function useBookApi() {\n  const [status, setStatus] = useState<Status | null>(null)\n\n  return {\n    status,\n    readBook,\n    addTodo,\n    removeTodo,\n    editTodoTitle,\n    editTodoChecked,\n    editTodoPosition\n  }\n\n  async function readBook(): Promise<Book> {\n    return await makeRequest('reading book', apiRequest('GET', `todo-list/book`))\n  }\n  async function addTodo(bookTimestamp: number, title: string, position?: number): Promise<Book> {\n    return await makeRequest('adding todo', apiRequest('POST', `todo-list/book/todo`, { bookTimestamp, title, position }))\n  }\n  async function removeTodo(bookTimestamp: number, id: number): Promise<Book> {\n    return await makeRequest('removing todo', apiRequest('DELETE', `todo-list/book/todo`, { bookTimestamp, id }))\n  }\n  async function editTodo(\n    bookTimestamp: number,\n    id: number,\n    title: string | undefined,\n    checked: boolean | undefined,\n    position: number | undefined\n  ): Promise<Book> {\n    return await makeRequest('editing todo', apiRequest('PUT', `todo-list/book/todo`, { bookTimestamp, id, title, checked, position }))\n  }\n\n  async function editTodoTitle(bookTimestamp: number, id: number, title: string) {\n    return await editTodo(bookTimestamp, id, title, undefined, undefined)\n  }\n  async function editTodoChecked(bookTimestamp: number, id: number, checked: boolean) {\n    return await editTodo(bookTimestamp, id, undefined, checked, undefined)\n  }\n  async function editTodoPosition(bookTimestamp: number, id: number, position: number) {\n    return await editTodo(bookTimestamp, id, undefined, undefined, position)\n  }\n\n  async function makeRequest(status: Status, response: Promise<Book>): Promise<Book> {\n    if (!status) throw new Error(`Not possible while ${status}.`)\n\n    setStatus(status)\n    try {\n      const book: Book = await response\n      setStatus(null)\n      return book\n    } catch (reason) {\n      setStatus(null)\n      throw reason\n    }\n  }\n}\n","import React, { useState } from 'react'\nimport { Snackbar } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nexport default function usePromiseHandler() {\n  const [error, setError] = useState<string | null>(null)\n\n  async function handlePromise<T>(\n    makePromise: () => Promise<T>,\n    makeErrorMessage?: (reason: any) => string\n  ): Promise<{ success: true; result: T } | { success: false }> {\n    try {\n      const result = await makePromise()\n      setError(null)\n      return { success: true, result }\n    } catch (reason) {\n      console.error(reason)\n      setError(makeErrorMessage ? makeErrorMessage(reason) : String(reason))\n      return { success: false }\n    }\n  }\n\n  const errorSnackbar = (\n    <Snackbar open={!!error} autoHideDuration={5000} onClose={() => setError(null)}>\n      <Alert severity=\"error\" onClose={() => setError(null)}>\n        {error}\n      </Alert>\n    </Snackbar>\n  )\n\n  return {\n    handlePromise,\n    errorSnackbar\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport { authenticate } from '../../core/auth'\nimport theme from './theme'\nimport App from './App'\n// import * as serviceWorker from './serviceWorker';\n\nauthenticate() &&\n  ReactDOM.render(\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <App />\n    </ThemeProvider>,\n    document.getElementById('root')\n  )\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}