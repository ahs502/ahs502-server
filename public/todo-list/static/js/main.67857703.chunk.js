(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{68:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),u=n(122),i=n(123),s=n(57),l=n(56),d=n(37),p=n(51),f="app-data/".concat(config.app),m=localStorage.getItem(f),h=m&&JSON.parse(m);function b(e){localStorage.setItem(f,JSON.stringify(e)),h=e}h||b({});var v=new Proxy(h,{get:function(e,t,n){return h[t]},set:function(e,t,n,r){return b(Object(p.a)({},h,Object(d.a)({},t,n))),!0},deleteProperty:function(e,t){var n=h;n[t];return b(Object(s.a)(n,[t].map(l.a))),!0}});function E(){delete v["auth-code"],window.location.reload()}var w=n(55),k=Object(w.a)({palette:{primary:{main:"#A049E7"},secondary:{main:"#E96BED"}}}),x=n(6),y=n.n(x),g=n(9),O=n(19),j=n(125);function T(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(y.a.mark((function e(t,n,r,a){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/".concat(n),{method:t,headers:{"auth-code":v["auth-code"],"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});case 2:if(401!==(c=e.sent).status){e.next=6;break}return E(),e.abrupt("return",null);case 6:if(c.ok){e.next=14;break}return e.t0=Error,e.t1="".concat(c.statusText," (").concat(c.status,"): "),e.next=11,c.text();case 11:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 14:return e.next=16,a?c.text():c.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(105),R=n(108),A=n(109),P=n(126),B=n(111),I=n(112),L=n(58),W=n(110),G=n(113);function D(e){var t=e.book,n=e.disabled,r=e.onRefresh;Object(L.a)();return a.a.createElement(S.a,{position:"absolute"},a.a.createElement(R.a,null,a.a.createElement(A.a,{color:"inherit",disabled:n,onClick:function(){return E()}},a.a.createElement(W.a,null)),a.a.createElement(P.a,{marginX:2},a.a.createElement(B.a,{variant:"h6",noWrap:!0},"Todo List")),t&&a.a.createElement(B.a,{variant:"subtitle2",noWrap:!0},t.name),a.a.createElement(P.a,{flexGrow:1}),a.a.createElement(P.a,{flexGrow:0,flexShrink:0,marginLeft:2},a.a.createElement(I.a,{variant:"outlined",color:"inherit",endIcon:a.a.createElement(G.a,null),disabled:n,onClick:r},"Refresh\xa0\xa0"))))}var J=n(130),N=n(127);var U=n(121),F=n(114),K=n(78),q=n(128),H=n(124),X=n(115),z=n(116),M=n(117);function Q(e){var t=e.item,n=(e.index,e.disabled),c=e.onCheck,o=e.onEdit,u=e.onRemove,i=Object(r.useState)(!1),s=Object(O.a)(i,2),l=s[0],d=s[1],p=Object(r.useState)(""),f=Object(O.a)(p,2),m=f[0],h=f[1];function b(){return v.apply(this,arguments)}function v(){return(v=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===o||void 0===o?void 0:o(m);case 2:t=e.sent,d(!t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l?a.a.createElement(F.a,{onClickAway:function(e){return d(!1)}},a.a.createElement(K.a,{elevation:6},a.a.createElement(P.a,{padding:2,display:"flex",alignItems:"center"},a.a.createElement(P.a,{marginRight:2},a.a.createElement(q.a,{color:"secondary",checked:!!t.checked,disabled:!0})),a.a.createElement(H.a,{fullWidth:!0,disabled:n,label:"Todo Text",placeholder:"Write the todo text here...",value:m,onChange:function(e){var t=e.target.value;return h(t)},onKeyDown:function(e){return 13===e.keyCode&&b()}}),a.a.createElement(P.a,{flexGrow:1}),a.a.createElement(P.a,{marginRight:1,marginLeft:2},a.a.createElement(A.a,{disabled:n,title:"Apply",onClick:function(){return b()}},a.a.createElement(X.a,null))),a.a.createElement(A.a,{disabled:n,title:"Cancel",onClick:function(){return d(!1)}},a.a.createElement(z.a,null))))):a.a.createElement(K.a,{elevation:2},a.a.createElement(P.a,{padding:2,display:"flex",alignItems:"center"},a.a.createElement(P.a,{marginRight:2},a.a.createElement(q.a,{color:"secondary",checked:!!t.checked,disabled:n,onChange:function(e,t){return null===c||void 0===c?void 0:c(t)}})),a.a.createElement(B.a,{variant:"subtitle1"},t.title),a.a.createElement(P.a,{flexGrow:1}),a.a.createElement(P.a,{marginRight:1,marginLeft:2},a.a.createElement(A.a,{disabled:n,title:"Edit",onClick:function(){h(t.title),d(!0)}},a.a.createElement(M.a,null))),a.a.createElement(A.a,{disabled:n,title:"Remove",onClick:function(){return null===u||void 0===u?void 0:u()}},a.a.createElement(z.a,null))))}var V=n(118),Y=n(119),Z=n(120);function $(e){var t=e.disabled,n=e.onAdd,c=Object(r.useRef)(null),o=Object(r.useState)(""),u=Object(O.a)(o,2),i=u[0],s=u[1],l=Object(L.a)();function d(){return p.apply(this,arguments)}function p(){return(p=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n(i);case 4:e.sent&&(s(""),setTimeout((function(){var e,t;return null===(e=c.current)||void 0===e||null===(t=e.focus)||void 0===t?void 0:t.call(e)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(K.a,{variant:"outlined",square:!0},a.a.createElement(P.a,{padding:2,display:"flex",alignItems:"center",style:{backgroundColor:l.palette.background.default}},a.a.createElement(P.a,{marginRight:2},a.a.createElement(A.a,{disabled:t||!0,title:"Select",onClick:function(){}},a.a.createElement(V.a,null))),a.a.createElement(H.a,{innerRef:c,fullWidth:!0,disabled:t,label:"New Todo",placeholder:"Write the todo text here...",value:i,onChange:function(e){var t=e.target.value;return s(t)},onKeyDown:function(e){return 13===e.keyCode&&d()}}),a.a.createElement(P.a,{flexGrow:1}),a.a.createElement(P.a,{marginRight:1,marginLeft:2},a.a.createElement(A.a,{disabled:t||!i,title:"Add",onClick:function(){return d()}},a.a.createElement(Y.a,null))),a.a.createElement(A.a,{disabled:t||!i,title:"Clear",onClick:function(){return function(){var e,t;s(""),null===(e=c.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}()}},a.a.createElement(Z.a,null))))}function _(e){var t=e.book,n=e.disabled,r=e.onAdd,c=e.onCheck,o=e.onEdit,u=e.onRemove;return t?a.a.createElement(P.a,{marginTop:10},a.a.createElement(U.a,{maxWidth:"md"},0===t.list.length?a.a.createElement(P.a,{paddingTop:2,paddingBottom:4},a.a.createElement(B.a,{variant:"body1"},"There is no items in the list!"),a.a.createElement(B.a,{variant:"subtitle1",color:"secondary"},"Start by adding a ",a.a.createElement("strong",null,"new")," todo.")):a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{marginBottom:2},a.a.createElement($,{disabled:n,onAdd:r&&function(){var e=Object(g.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r(t,!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),t.list.map((function(e,t){return a.a.createElement(P.a,{marginBottom:2,key:e.id},a.a.createElement(Q,{item:e,index:t,disabled:n,onCheck:c&&function(t){return c(e.id,t)},onEdit:o&&function(){var t=Object(g.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o(e.id,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:u&&function(){return u(e.id)}}))}))),a.a.createElement($,{disabled:n,onAdd:r&&function(){var e=Object(g.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,!0);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))):null}var ee=Object(j.a)((function(e){return{}}));var te=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],o=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],a=t[1];return{status:n,readBook:function(){return c.apply(this,arguments)},addTodo:function(e,t,n){return o.apply(this,arguments)},removeTodo:function(e,t){return u.apply(this,arguments)},editTodoTitle:function(e,t,n){return l.apply(this,arguments)},editTodoChecked:function(e,t,n){return d.apply(this,arguments)},editTodoPosition:function(e,t,n){return p.apply(this,arguments)}};function c(){return(c=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("reading book",T("GET","todo-list/book"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(g.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("adding todo",T("POST","todo-list/book/todo",{bookTimestamp:t,title:n,position:r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(g.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("removing todo",T("DELETE","todo-list/book/todo",{bookTimestamp:t,id:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e,t,n,r,a){return s.apply(this,arguments)}function s(){return(s=Object(g.a)(y.a.mark((function e(t,n,r,a,c){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("editing todo",T("PUT","todo-list/book/todo",{bookTimestamp:t,id:n,title:r,checked:a,position:c}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(g.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,n,r,void 0,void 0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(g.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,n,void 0,r,void 0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(g.a)(y.a.mark((function e(t,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t,n,void 0,void 0,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=Object(g.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Not possible while ".concat(t,"."));case 2:return a(t),e.prev=3,e.next=6,n;case 6:return r=e.sent,a(null),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(3),a(null),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}}(),u=o.status,i=o.readBook,s=o.addTodo,l=o.removeTodo,d=o.editTodoTitle,p=o.editTodoChecked,f=(o.editTodoPosition,function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1];function o(){return(o=Object(g.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return r=e.sent,c(null),e.abrupt("return",{success:!0,result:r});case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),c(n?n(e.t0):String(e.t0)),e.abrupt("return",{success:!1});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return{handlePromise:function(e,t){return o.apply(this,arguments)},errorSnackbar:a.a.createElement(J.a,{open:!!n,autoHideDuration:5e3,onClose:function(){return c(null)}},a.a.createElement(N.a,{severity:"error",onClose:function(){return c(null)}},n))}}()),m=f.handlePromise,h=f.errorSnackbar,b=!!u,v=n?n.timestamp:0;function E(){return w.apply(this,arguments)}function w(){return(w=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i);case 2:(t=e.sent).success&&c(t.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(g.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?void 0:0,e.next=3,m((function(){return s(v,t,r)}));case 3:return(a=e.sent).success&&c(a.result),e.abrupt("return",a.success);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(g.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m((function(){return p(v,t,n)}));case 2:(r=e.sent).success&&c(r.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(g.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m((function(){return d(v,t,n)}));case 2:return(r=e.sent).success&&c(r.result),e.abrupt("return",r.success);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(g.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m((function(){return l(v,t)}));case 2:(n=e.sent).success&&c(n.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){E()}),[]),ee(),a.a.createElement(a.a.Fragment,null,a.a.createElement(D,{book:n,disabled:b,onRefresh:E}),a.a.createElement(_,{book:n,disabled:b,onAdd:function(e,t){return k.apply(this,arguments)},onCheck:function(e,t){return x.apply(this,arguments)},onEdit:function(e,t){return j.apply(this,arguments)},onRemove:function(e){return C.apply(this,arguments)}}),h)};(function(){var e=new URLSearchParams(window.location.search).get("auth-code"),t=v["auth-code"];if(e)v["auth-code"]=e,window.history.replaceState(null,"",window.location.pathname);else if(!t)return window.location.href="".concat(config.loginUrl,"?app=").concat(config.app,"&url=").concat(window.location.origin).concat(window.location.pathname),!1;return!0})()&&o.a.render(a.a.createElement(u.a,{theme:k},a.a.createElement(i.a,null),a.a.createElement(te,null)),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.67857703.chunk.js.map