{"version":3,"sources":["../../core/persistant.ts","../../core/auth.ts","theme.ts","../../core/api-request.ts","components/Header.tsx","components/Item.tsx","components/NewItem.tsx","components/List.tsx","App.tsx","utils/use-book-api.ts","utils/use-promise-handler.tsx","index.tsx"],"names":["key","config","app","value","localStorage","getItem","data","JSON","parse","update","newData","setItem","stringify","persistant","Proxy","get","target","property","receiver","set","deleteProperty","logout","window","location","reload","theme","createMuiTheme","palette","primary","main","secondary","apiRequest","method","path","body","textResult","a","fetch","headers","undefined","response","status","ok","Error","statusText","text","json","Header","book","disabled","onRefresh","useTheme","AppBar","position","Toolbar","IconButton","color","onClick","Box","marginX","Typography","variant","noWrap","name","flexGrow","flexShrink","marginLeft","Button","endIcon","Cached","Item","item","index","dragging","onCheck","onEdit","onRemove","useState","editMode","setEditMode","editedTitle","setEditedTitle","apply","done","ClickAwayListener","onClickAway","event","Paper","elevation","padding","display","alignItems","marginRight","Checkbox","checked","TextField","fullWidth","label","placeholder","onChange","onKeyDown","keyCode","title","Check","Close","Edit","NewItem","onAdd","inputRef","useRef","setTitle","add","setTimeout","current","focus","square","style","backgroundColor","background","default","ArrowDropDown","innerRef","Add","clear","ClearAll","List","onReorder","viewBook","setViewBook","useEffect","result","destination","oldIndex","source","itemId","list","id","newIndex","newList","splice","marginTop","Container","maxWidth","length","paddingTop","paddingBottom","marginBottom","onDragEnd","droppableId","isDropDisabled","provided","snapshot","droppableProps","ref","map","draggableId","String","isDragDisabled","draggableProps","dragHandleProps","spacing","isDragging","added","useStyles","makeStyles","App","setBook","setStatus","readBook","addTodo","removeTodo","editTodoTitle","editTodoChecked","editTodoPosition","makeRequest","bookTimestamp","editTodo","useBookApi","error","setError","makePromise","makeErrorMessage","success","console","handlePromise","errorSnackbar","Snackbar","open","autoHideDuration","onClose","Alert","severity","usePromiseHandler","timestamp","refresh","append","authCodeFromUrl","URLSearchParams","search","authCodeFromLocalStorage","history","replaceState","pathname","href","loginUrl","origin","authenticate","ReactDOM","render","ThemeProvider","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.374e07d9.chunk.js","sourcesContent":["const key = `app-data/${config.app}`\n\nconst value = localStorage.getItem(key)\nlet data: Persistant = value && JSON.parse(value)\ndata || update({})\n\nfunction update(newData: Persistant): void {\n  localStorage.setItem(key, JSON.stringify(newData))\n  data = newData\n}\n\nconst persistant: Persistant = new Proxy(data, {\n  get(target, property: keyof Persistant, receiver) {\n    return data[property]\n  },\n  set(target, property: keyof Persistant, value, receiver): boolean {\n    update({\n      ...data,\n      [property]: value\n    })\n    return true\n  },\n  deleteProperty(target, property: keyof Persistant): boolean {\n    const { [property]: value, ...newData } = data\n    update(newData)\n    return true\n  }\n}) as any\n\nexport default persistant\n","import persistant from './persistant'\n\n/**\n * Checks authentication status, resolves `auth-code` from URL,\n * returns true iff the app is authenticated and allowed to continue running.\n */\nexport function authenticate(): boolean {\n  const urlParams = new URLSearchParams(window.location.search)\n  const authCodeFromUrl = urlParams.get('auth-code')\n  const authCodeFromLocalStorage = persistant['auth-code']\n\n  if (authCodeFromUrl) {\n    persistant['auth-code'] = authCodeFromUrl\n    window.history.replaceState(null, '', window.location.pathname)\n  } else if (!authCodeFromLocalStorage) {\n    window.location.href = `${config.loginUrl}?app=${config.app}&url=${window.location.origin}${window.location.pathname}`\n    return false\n  }\n  return true\n}\n\n/**\n * Removes authentication and reloads the app,\n * pretty much redirecting it to the login page.\n */\nexport function logout(): void {\n  delete persistant['auth-code']\n  window.location.reload()\n}\n","import { createMuiTheme } from '@material-ui/core'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#A049E7'\n    },\n    secondary: {\n      main: '#E96BED'\n    }\n  }\n})\n\nexport default theme\n","import persistant from './persistant'\nimport { logout } from './auth'\n\nexport async function apiRequest<R = void>(method: 'GET' | 'POST' | 'DELETE' | 'PUT', path: string, body?: any, textResult?: boolean): Promise<R> {\n  const response = await fetch(`/api/${path}`, {\n    method,\n    headers: {\n      'auth-code': persistant['auth-code']!,\n      'Content-Type': 'application/json'\n    },\n    body: body ? JSON.stringify(body) : undefined\n  })\n\n  if (response.status === 401) {\n    logout()\n    return null as any\n  }\n\n  if (!response.ok) throw new Error(`${response.statusText} (${response.status}): ${await response.text()}`)\n\n  return await (textResult ? response.text() : response.json())\n}\n","import React from 'react'\nimport { Theme, AppBar, Toolbar, Typography, Box, IconButton, Button } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Cached as CachedIcon, ExitToApp as ExitIcon } from '@material-ui/icons'\n\nimport { logout } from '../../../core/auth'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onRefresh(): void\n}\n\nexport default function Header({ book, disabled, onRefresh }: Props) {\n  const theme = useTheme<Theme>()\n\n  return (\n    <AppBar position=\"absolute\">\n      <Toolbar>\n        <IconButton color=\"inherit\" disabled={disabled} onClick={() => logout()}>\n          <ExitIcon />\n        </IconButton>\n        <Box marginX={2}>\n          <Typography variant=\"h6\" noWrap>\n            Todo List\n          </Typography>\n        </Box>\n        {book && (\n          <Typography variant=\"subtitle2\" noWrap>\n            {book.name}\n          </Typography>\n        )}\n        <Box flexGrow={1} />\n        <Box flexGrow={0} flexShrink={0} marginLeft={2}>\n          <Button variant=\"outlined\" color=\"inherit\" endIcon={<CachedIcon />} disabled={disabled} onClick={onRefresh}>\n            Refresh&nbsp;&nbsp;\n          </Button>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import React, { useState } from 'react'\nimport { Box, Paper, Typography, Checkbox, IconButton, ClickAwayListener, TextField } from '@material-ui/core'\nimport { Edit as EditIcon, Close as CloseIcon, Check as CheckIcon } from '@material-ui/icons'\n\ninterface Props {\n  item: Book['list'][number]\n  index: number\n  dragging?: boolean\n  disabled?: boolean\n  onCheck?(checked: boolean): void\n  onEdit?(title: string): Promise<boolean>\n  onRemove?(): void\n}\n\nexport default function Item({ item, index, dragging, disabled, onCheck, onEdit, onRemove }: Props) {\n  const [editMode, setEditMode] = useState(false)\n  const [editedTitle, setEditedTitle] = useState('')\n\n  async function apply() {\n    const done = await onEdit?.(editedTitle)\n    setEditMode(!done)\n  }\n\n  if (editMode)\n    return (\n      <ClickAwayListener onClickAway={event => setEditMode(false)}>\n        <Paper elevation={6}>\n          <Box padding={2} display=\"flex\" alignItems=\"center\">\n            <Box marginRight={2}>\n              <Checkbox color=\"secondary\" checked={!!item.checked} disabled={true} />\n            </Box>\n            <TextField\n              fullWidth\n              disabled={disabled}\n              label=\"Todo Text\"\n              placeholder=\"Write the todo text here...\"\n              value={editedTitle}\n              onChange={({ target: { value } }) => setEditedTitle(value)}\n              onKeyDown={event => event.keyCode === 13 && apply()}\n            />\n            <Box flexGrow={1} />\n            <Box marginRight={1} marginLeft={2}>\n              <IconButton disabled={disabled} title=\"Apply\" onClick={() => apply()}>\n                <CheckIcon />\n              </IconButton>\n            </Box>\n            <IconButton disabled={disabled} title=\"Cancel\" onClick={() => setEditMode(false)}>\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        </Paper>\n      </ClickAwayListener>\n    )\n\n  return (\n    <Paper elevation={2}>\n      <Box padding={2} display=\"flex\" alignItems=\"center\">\n        <Box marginRight={2}>\n          <Checkbox color=\"secondary\" checked={!!item.checked} disabled={disabled} onChange={(event, checked) => onCheck?.(checked)} />\n        </Box>\n        <Typography variant=\"subtitle1\">{item.title}</Typography>\n        <Box flexGrow={1} />\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton\n            disabled={disabled}\n            title=\"Edit\"\n            onClick={() => {\n              setEditedTitle(item.title)\n              setEditMode(true)\n            }}\n          >\n            <EditIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled} title=\"Remove\" onClick={() => onRemove?.()}>\n          <CloseIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useRef } from 'react'\nimport { Paper, Box, TextField, IconButton, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { ClearAll as ClearAllIcon, Add as AddIcon, ArrowDropDown as ArrowDropDownIcon } from '@material-ui/icons'\n\ninterface Props {\n  disabled?: boolean\n  onAdd?(title: string): Promise<boolean>\n}\n\nexport default function NewItem({ disabled, onAdd }: Props) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [title, setTitle] = useState('')\n  const theme = useTheme<Theme>()\n\n  async function add() {\n    if (!onAdd) return\n\n    const added = await onAdd(title)\n    if (added) {\n      setTitle('')\n      setTimeout(() => inputRef.current?.focus?.()) //TODO: Not working.\n    }\n  }\n  function clear() {\n    setTitle('')\n    inputRef.current?.focus?.() //TODO: Not working.\n  }\n\n  return (\n    <Paper variant=\"outlined\" square>\n      <Box padding={2} display=\"flex\" alignItems=\"center\" style={{ backgroundColor: theme.palette.background.default }}>\n        <Box marginRight={2}>\n          <IconButton\n            disabled={disabled || true}\n            title=\"Select\"\n            onClick={() => {\n              //TODO: Implement suggestions.\n            }}\n          >\n            <ArrowDropDownIcon />\n          </IconButton>\n        </Box>\n        <TextField\n          innerRef={inputRef}\n          fullWidth\n          disabled={disabled}\n          label=\"New Todo\"\n          placeholder=\"Write the todo text here...\"\n          value={title}\n          onChange={({ target: { value } }) => setTitle(value)}\n          onKeyDown={event => event.keyCode === 13 && add()}\n        />\n        <Box flexGrow={1} />\n        <Box marginRight={1} marginLeft={2}>\n          <IconButton disabled={disabled || !title} title=\"Add\" onClick={() => add()}>\n            <AddIcon />\n          </IconButton>\n        </Box>\n        <IconButton disabled={disabled || !title} title=\"Clear\" onClick={() => clear()}>\n          <ClearAllIcon />\n        </IconButton>\n      </Box>\n    </Paper>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd'\nimport { Container, Typography, Box, Theme } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport Item from './Item'\nimport NewItem from './NewItem'\n\ninterface Props {\n  book: Book | null\n  disabled?: boolean\n  onAdd?(title: string, append: boolean): Promise<boolean>\n  onCheck?(id: number, checked: boolean): void\n  onEdit?(id: number, title: string): Promise<boolean>\n  onRemove?(id: number): void\n  onReorder?(id: number, position: number): Promise<boolean>\n}\n\nexport default function List({ book, disabled, onAdd, onCheck, onEdit, onRemove, onReorder }: Props) {\n  const [viewBook, setViewBook] = useState<typeof book>(book)\n  useEffect(() => {\n    setViewBook(book)\n  }, [book])\n\n  const theme = useTheme<Theme>()\n\n  async function handleDragEnd(result: DropResult): Promise<void> {\n    if (!result.destination || !book || !onReorder || disabled) return\n\n    const oldIndex = result.source.index\n    const itemId = viewBook?.list?.[oldIndex]?.id!\n    const newIndex = result.destination.index\n\n    const newList = [...book.list]\n    const item = newList.splice(oldIndex, 1)[0]\n    newList.splice(newIndex, 0, item)\n    setViewBook({\n      ...book,\n      list: newList\n    })\n\n    const done = await onReorder(itemId, newIndex)\n\n    if (!done) {\n      setViewBook(book)\n    }\n  }\n\n  if (!viewBook) return null\n\n  return (\n    <Box marginTop={10}>\n      <Container maxWidth=\"md\">\n        {viewBook.list.length === 0 ? (\n          <Box paddingTop={2} paddingBottom={4}>\n            <Typography variant=\"body1\">There is no items in the list!</Typography>\n            <Typography variant=\"subtitle1\" color=\"secondary\">\n              Start by adding a <strong>new</strong> todo.\n            </Typography>\n          </Box>\n        ) : (\n          <>\n            <Box marginBottom={2}>\n              <NewItem disabled={disabled} onAdd={onAdd && (async title => onAdd(title, false))} />\n            </Box>\n\n            <DragDropContext onDragEnd={handleDragEnd}>\n              <Droppable droppableId=\"list\" isDropDisabled={disabled}>\n                {(provided, snapshot) => (\n                  <div {...provided.droppableProps} ref={provided.innerRef}>\n                    {viewBook.list.map((item, index) => (\n                      <Draggable key={item.id} draggableId={String(item.id)} index={index} isDragDisabled={disabled}>\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            {...provided.dragHandleProps}\n                            style={{\n                              marginBottom: theme.spacing(2),\n                              ...provided.draggableProps.style\n                            }}\n                          >\n                            <Item\n                              item={item}\n                              index={index}\n                              dragging={snapshot.isDragging}\n                              disabled={disabled}\n                              onCheck={onCheck && (checked => onCheck(item.id, checked))}\n                              onEdit={onEdit && (async title => onEdit(item.id, title))}\n                              onRemove={onRemove && (() => onRemove(item.id))}\n                            />\n                          </div>\n                        )}\n                      </Draggable>\n                    ))}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </DragDropContext>\n          </>\n        )}\n        <NewItem\n          disabled={disabled}\n          onAdd={\n            onAdd &&\n            (async title => {\n              const added = await onAdd(title, true)\n              //TODO: Scroll to the end after render completed.\n              return added\n            })\n          }\n        />\n      </Container>\n    </Box>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Theme, Typography, Box, Button } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nimport useBookApi from './utils/use-book-api'\n\nimport Header from './components/Header'\nimport usePromiseHandler from './utils/use-promise-handler'\nimport List from './components/List'\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  //...\n}))\n\nfunction App() {\n  const [book, setBook] = useState<Book | null>(null)\n  const { status, readBook, addTodo, removeTodo, editTodoTitle, editTodoChecked, editTodoPosition } = useBookApi()\n  const { handlePromise, errorSnackbar } = usePromiseHandler()\n\n  const disabled = !!status\n  const bookTimestamp = book ? book.timestamp : 0\n\n  async function refresh() {\n    const response = await handlePromise(readBook)\n    response.success && setBook(response.result)\n  }\n  async function add(title: string, append: boolean): Promise<boolean> {\n    const position = append ? undefined : 0\n    const response = await handlePromise(() => addTodo(bookTimestamp, title, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function check(id: number, checked: boolean) {\n    const response = await handlePromise(() => editTodoChecked(bookTimestamp, id, checked))\n    response.success && setBook(response.result)\n  }\n  async function edit(id: number, title: string): Promise<boolean> {\n    const response = await handlePromise(() => editTodoTitle(bookTimestamp, id, title))\n    response.success && setBook(response.result)\n    return response.success\n  }\n  async function remove(id: number) {\n    const response = await handlePromise(() => removeTodo(bookTimestamp, id))\n    response.success && setBook(response.result)\n  }\n  async function reorder(id: number, position: number): Promise<boolean> {\n    const response = await handlePromise(() => editTodoPosition(bookTimestamp, id, position))\n    response.success && setBook(response.result)\n    return response.success\n  }\n\n  useEffect(() => {\n    refresh()\n  }, [])\n\n  const classes = useStyles()\n\n  return (\n    <>\n      <Header book={book} disabled={disabled} onRefresh={refresh} />\n      <List book={book} disabled={disabled} onAdd={add} onCheck={check} onEdit={edit} onRemove={remove} onReorder={reorder} />\n      {errorSnackbar}\n    </>\n  )\n}\n\nexport default App\n","import { useState } from 'react'\n\nimport { apiRequest } from '../../../core/api-request'\n\ntype Status = 'reading book' | 'adding todo' | 'removing todo' | 'editing todo'\n\nexport default function useBookApi() {\n  const [status, setStatus] = useState<Status | null>(null)\n\n  return {\n    status,\n    readBook,\n    addTodo,\n    removeTodo,\n    editTodoTitle,\n    editTodoChecked,\n    editTodoPosition\n  }\n\n  async function readBook(): Promise<Book> {\n    return await makeRequest('reading book', apiRequest('GET', `todo-list/book`))\n  }\n  async function addTodo(bookTimestamp: number, title: string, position?: number): Promise<Book> {\n    return await makeRequest('adding todo', apiRequest('POST', `todo-list/book/todo`, { bookTimestamp, title, position }))\n  }\n  async function removeTodo(bookTimestamp: number, id: number): Promise<Book> {\n    return await makeRequest('removing todo', apiRequest('DELETE', `todo-list/book/todo`, { bookTimestamp, id }))\n  }\n  async function editTodo(\n    bookTimestamp: number,\n    id: number,\n    title: string | undefined,\n    checked: boolean | undefined,\n    position: number | undefined\n  ): Promise<Book> {\n    return await makeRequest('editing todo', apiRequest('PUT', `todo-list/book/todo`, { bookTimestamp, id, title, checked, position }))\n  }\n\n  async function editTodoTitle(bookTimestamp: number, id: number, title: string) {\n    return await editTodo(bookTimestamp, id, title, undefined, undefined)\n  }\n  async function editTodoChecked(bookTimestamp: number, id: number, checked: boolean) {\n    return await editTodo(bookTimestamp, id, undefined, checked, undefined)\n  }\n  async function editTodoPosition(bookTimestamp: number, id: number, position: number) {\n    return await editTodo(bookTimestamp, id, undefined, undefined, position)\n  }\n\n  async function makeRequest(status: Status, response: Promise<Book>): Promise<Book> {\n    if (!status) throw new Error(`Not possible while ${status}.`)\n\n    setStatus(status)\n    try {\n      const book: Book = await response\n      setStatus(null)\n      return book\n    } catch (reason) {\n      setStatus(null)\n      throw reason\n    }\n  }\n}\n","import React, { useState } from 'react'\nimport { Snackbar } from '@material-ui/core'\nimport { Alert } from '@material-ui/lab'\n\nexport default function usePromiseHandler() {\n  const [error, setError] = useState<string | null>(null)\n\n  async function handlePromise<T>(\n    makePromise: () => Promise<T>,\n    makeErrorMessage?: (reason: any) => string\n  ): Promise<{ success: true; result: T } | { success: false }> {\n    try {\n      const result = await makePromise()\n      setError(null)\n      return { success: true, result }\n    } catch (reason) {\n      console.error(reason)\n      setError(makeErrorMessage ? makeErrorMessage(reason) : String(reason))\n      return { success: false }\n    }\n  }\n\n  const errorSnackbar = (\n    <Snackbar open={!!error} autoHideDuration={5000} onClose={() => setError(null)}>\n      <Alert severity=\"error\" onClose={() => setError(null)}>\n        {error}\n      </Alert>\n    </Snackbar>\n  )\n\n  return {\n    handlePromise,\n    errorSnackbar\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\n\nimport { authenticate } from '../../core/auth'\nimport theme from './theme'\nimport App from './App'\n// import * as serviceWorker from './serviceWorker';\n\nauthenticate() &&\n  ReactDOM.render(\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <App />\n    </ThemeProvider>,\n    document.getElementById('root')\n  )\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}